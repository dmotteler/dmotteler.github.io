<!DOCTYPE html>
<!-- $Id: picksongs.tpl,v 1.3 2020/07/19 19:16:20 dfm Exp $
     $Log: picksongs.tpl,v $
     Revision 1.3  2020/07/19 19:16:20  dfm
     sytle the Done button, relabel as Send
     send the song list via email, remove the download functionality

     Revision 1.2  2020/07/13 03:48:19  dfm
     minimize the style info and include it in the template, get rid of .css file

     Revision 1.1  2020/07/10 17:07:36  dfm
     Initial revision


-->
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Pick songs</title>
<style>
table {
    font-family:Arial; font-size: 20px;
    border-width:5px; border-collapse: collapse;
    padding: 4px;
    min-width: 400px;
}
tr { page-break-inside: avoid; }
th { background-color:lightgreen; font-weight: bold; vertical-align: text-top; text-align: center; }
td { padding: 4px; text-align: center; }
.chosen { background-color: lightblue; }
.hidden { display: none; }
.donebutt { font-weight: bold; background-color: yellow; font-size: 20px; }
body{ -webkit-print-color-adjust:exact; }
</style>
<script type="text/javascript">

var songorder = 0;
var songlist = [];

function selme(el) {
    // order cell is first child of the row
    let ordel = el.childNodes[0];

    // nbsp; is char code a0 hex. cell will have
    // that value until it has been selected.
    if (ordel.textContent == "\xa0") {
        songorder += 1;
        ordel.textContent = songorder.toString();
        el.classList.add("chosen");
    } else {
        // if this song was already chosen, un-choose it and
        // blank out the order. choosing it again will put it 
        // at the current end.
        el.classList.remove("chosen");
        ordel.textContent = "\xa0";
    }
}

function togcat(el) {
    // one of the "show category" checkboxes has changed.
    // set the hidden value as appropriate for each row.
    // only set hidden if all categories for the song are un-checked.

    let songrows = document.getElementsByTagName("tr");
    let catsels = document.querySelectorAll("input[type='checkbox']");

    var showcats = [];

    for (let catel of catsels) {
        // category name follows the checkbox, and has unwanted
        // whitespace after it.
        let cat = catel.nextSibling.textContent.replace(/(\s+$)/,'');
        showcats[cat] = catel.checked;
    }

    for (let songrowel of songrows) {
        let songcats = songrowel.classList;
        if (songcats.length == 0) {
            // this row has no classes - skip it. 
            // (this will skip the header rows).
            continue;
        }

        // if any of a song's cats (except hidden) is
        // checked, show the song.
        let showit = false;
        let ishidden = false;
        for (let scat of songcats) {
            if (scat == "hidden") {
                ishidden = true;
            } else if (showcats[scat]) {
                showit = true;
            }
        }

        if (showit) {
            if (ishidden) {
                // currently hidden, but should be showed.
                songrowel.classList.remove("hidden");
            }
        } else {
            if (! ishidden) {
                // not hidden, but don't showit
                songrowel.classList.add("hidden");
            }
        }
    }
}

function alldone() {
    var songs = [];
    for (let element of document.getElementsByClassName("chosen")) {
        let ord = Number(element.childNodes[0].textContent) - 1;
        let song = element.childNodes[1].textContent;
        songs[ord] = song;
    }
    if (songs.length < 1) {
        alert("No songs selected?");
        return;
    }

    // songs array may be sparse if any song was de-selected.
    // json will put 'null' for any empty cell. this gets rid of that.
    var seq = [];
    for (let song of songs) {
        if (song) {
            seq.push(song);
        }
    }

    let jlist = JSON.stringify(seq);

    let mthref = "mailto:dmotteler@aol.com?subject=songlist&body=" + jlist;
    let mtel = document.getElementById("mtcell");
    mtel.href = mthref;
    mtel.click();

    console.log(jlist);
}
</script>
</head>
<body>
<table border="1">
<tr><th colspan='2'>Pick Songs</th></tr>
<tr>
<th><input type="button" class="donebutt" value="Send" onclick="alldone()"/></th>
<th>Song Title</th>
</tr>
 <tr class="Current PoleCatII" onclick="selme(this)"><td class="ord">&nbsp;</td><td>After You've Gone</td></tr>
 <tr class="Show" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Bad, Bad Leroy Brown</td></tr>
 <tr class="Current" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Breaking Up Is Hard To Do</td></tr>
 <tr class="PoleCatII" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Bright Was The Night</td></tr>
 <tr class="PoleCatII" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Caroline</td></tr>
 <tr class="Current PoleCatII" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Coney Island Baby</td></tr>
 <tr class="Current" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Consider Yourself</td></tr>
 <tr class="PoleCatII" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Darkness On The Delta</td></tr>
 <tr class="Current" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Daydream</td></tr>
 <tr class="Current" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Dona Nobis Pacem</td></tr>
 <tr class="PoleCat" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Down By The Old Mill Stream</td></tr>
 <tr class="PoleCat" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Down Our Way</td></tr>
 <tr class="PoleCatII" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Drivin' Me Crazy</td></tr>
 <tr class="Show" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Edelweiss</td></tr>
 <tr class="PoleCatII" onclick="selme(this)"><td class="ord">&nbsp;</td><td>From The First Hello To The Last Goodbye</td></tr>
 <tr class="Current" onclick="selme(this)"><td class="ord">&nbsp;</td><td>God Bless America</td></tr>
 <tr class="Show" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Happy Together</td></tr>
 <tr class="Current PoleCatII" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Hello Mary Lou</td></tr>
 <tr class="PoleCat" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Honey/Little 'Lize - Medley</td></tr>
 <tr class="Show" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Hooked On a Feeling</td></tr>
 <tr class="Current PoleCatII" onclick="selme(this)"><td class="ord">&nbsp;</td><td>I Don't Know Why</td></tr>
 <tr class="PoleCatII" onclick="selme(this)"><td class="ord">&nbsp;</td><td>I've Been Working On The Railroad</td></tr>
 <tr class="Current" onclick="selme(this)"><td class="ord">&nbsp;</td><td>In My Room</td></tr>
 <tr class="Current" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Irish Blessing</td></tr>
 <tr class="Current" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Keep The Whole World Singing</td></tr>
 <tr class="PoleCat" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Let Me Call You Sweetheart</td></tr>
 <tr class="Current" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Let's Get Together Again</td></tr>
 <tr class="PoleCatII" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Lida Rose/Will I Ever Tell You</td></tr>
 <tr class="Show" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Longest Time, The</td></tr>
 <tr class="Current" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Muskrat Ramble</td></tr>
 <tr class="Current" onclick="selme(this)"><td class="ord">&nbsp;</td><td>My Girl</td></tr>
 <tr class="PoleCat" onclick="selme(this)"><td class="ord">&nbsp;</td><td>My Wild Irish Rose</td></tr>
 <tr class="Show" onclick="selme(this)"><td class="ord">&nbsp;</td><td>O Danny Boy</td></tr>
 <tr class="Current" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Old Songs, The</td></tr>
 <tr class="Current" onclick="selme(this)"><td class="ord">&nbsp;</td><td>On The Sunny Side of the Street</td></tr>
 <tr class="Current PoleCatII" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Over The Rainbow</td></tr>
 <tr class="Current" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Riders In The Sky</td></tr>
 <tr class="Current" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Sentimental Journey</td></tr>
 <tr class="Show" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Seven Bridges Road</td></tr>
 <tr class="PoleCat" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Shine On Me</td></tr>
 <tr class="Current" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Shut De Do</td></tr>
 <tr class="Current" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Sixteen Tons</td></tr>
 <tr class="Show" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Stand By Me</td></tr>
 <tr class="Current" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Star-Spangled Banner, The</td></tr>
 <tr class="PoleCat" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Story Of The Rose</td></tr>
 <tr class="PoleCat" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Sweet And Lovely</td></tr>
 <tr class="PoleCat" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Sweet, Sweet Roses of Morn</td></tr>
 <tr class="Current" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Turn Your Radio On!</td></tr>
 <tr class="Current" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Under The Boardwalk</td></tr>
 <tr class="PoleCat" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Wait Till The Sun Shines, Nellie</td></tr>
 <tr class="Show" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Who Put the Bomp</td></tr>
 <tr class="Current" onclick="selme(this)"><td class="ord">&nbsp;</td><td>Yesterday</td></tr>
 <tr class="PoleCat" onclick="selme(this)"><td class="ord">&nbsp;</td><td>You Tell Me Your Dream</td></tr>
 <tr class="PoleCat" onclick="selme(this)"><td class="ord">&nbsp;</td><td>You're The Flower Of My Heart, Sweet Adeline</td></tr>
<tr><td colspan='2'>
 <input type='checkbox' name='cats' checked="1" onchange="togcat(this)">Current</input>
 <input type='checkbox' name='cats' checked="1" onchange="togcat(this)">PoleCat</input>
 <input type='checkbox' name='cats' checked="1" onchange="togcat(this)">PoleCatII</input>
 <input type='checkbox' name='cats' checked="1" onchange="togcat(this)">Show</input>
</td></tr>
</table>
<a class="hidden" id="mtcell" href=""</a>
</body>
</html>
